<!DOCTYPE HTML>

<html><head><meta charset="utf-8"/><title>Relation.Binary.Reasoning.Base.Single</title><link href="Agda.css" rel="stylesheet"/><script src="highlight-hover.js" type="text/javascript"></script></head><body><div class="navbar"><a class="active" href="README.html">Everything</a><a href="index.html" style="float:right">Home</a></div><div class="main"><pre class="Agda"><a class="Comment" id="1">------------------------------------------------------------------------</a>
<a class="Comment" id="74">-- The Agda standard library</a>
<a class="Comment" id="103">--</a>
<a class="Comment" id="106">-- The basic code for equational reasoning with a single relation</a>
<a class="Comment" id="172">------------------------------------------------------------------------</a>

<a class="Symbol" id="246">{-#</a> <a class="Keyword" id="250">OPTIONS</a> <a class="Pragma" id="258">--cubical-compatible</a> <a class="Pragma" id="279">--safe</a> <a class="Symbol" id="286">#-}</a>

<a class="Keyword" id="291">open</a> <a class="Keyword" id="296">import</a> <a class="Module" href="Relation.Binary.html" id="303">Relation.Binary</a>

<a class="Keyword" id="320">module</a> <a class="Module" href="Relation.Binary.Reasoning.Base.Single.html" id="327">Relation.Binary.Reasoning.Base.Single</a>
  <a class="Symbol" id="367">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#368" id="368">a</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#370" id="370">ℓ</a><a class="Symbol" id="371">}</a> <a class="Symbol" id="373">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#374" id="374">A</a> <a class="Symbol" id="376">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="378">Set</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#368" id="382">a</a><a class="Symbol" id="383">}</a> <a class="Symbol" id="385">(</a><a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#386" id="386">_∼_</a> <a class="Symbol" id="390">:</a> <a class="Function" href="Relation.Binary.Core.html#891" id="392">Rel</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#374" id="396">A</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#370" id="398">ℓ</a><a class="Symbol" id="399">)</a>
  <a class="Symbol" id="403">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#404" id="404">refl</a> <a class="Symbol" id="409">:</a> <a class="Function" href="Relation.Binary.Definitions.html#1413" id="411">Reflexive</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#386" id="421">_∼_</a><a class="Symbol" id="424">)</a> <a class="Symbol" id="426">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#427" id="427">trans</a> <a class="Symbol" id="433">:</a> <a class="Function" href="Relation.Binary.Definitions.html#1940" id="435">Transitive</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#386" id="446">_∼_</a><a class="Symbol" id="449">)</a>
  <a class="Keyword" id="453">where</a>

<a class="Comment" id="460">-- TODO: the following part is copied from Relation.Binary.Reasoning.Base.Partial</a>
<a class="Comment" id="542">-- in order to avoid larger refactors. We will refactor this part later</a>
<a class="Comment" id="614">-- so taht we use the same framework as Relation.Binary.Reasoning.Base.Partial.</a>

<a class="Keyword" id="695">open</a> <a class="Keyword" id="700">import</a> <a class="Module" href="Level.html" id="707">Level</a> <a class="Keyword" id="713">using</a> <a class="Symbol" id="719">(</a><a class="Primitive Operator" href="Agda.Primitive.html#961" id="720">_⊔_</a><a class="Symbol" id="723">)</a>
<a class="Keyword" id="725">open</a> <a class="Keyword" id="730">import</a> <a class="Module" href="Relation.Binary.PropositionalEquality.Core.html" id="737">Relation.Binary.PropositionalEquality.Core</a> <a class="Symbol" id="780">as</a> <a class="Module" id="783">P</a>
  <a class="Keyword" id="787">using</a> <a class="Symbol" id="793">(</a><a class="Datatype Operator" href="Agda.Builtin.Equality.html#150" id="794">_≡_</a><a class="Symbol" id="797">)</a>

<a class="Keyword" id="800">infix</a>  <a class="Number" id="807">4</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="809">_IsRelatedTo_</a>

<a class="Comment" id="824">------------------------------------------------------------------------</a>
<a class="Comment" id="897">-- Definition of "related to"</a>

<a class="Comment" id="928">-- This seemingly unnecessary type is used to make it possible to</a>
<a class="Comment" id="994">-- infer arguments even if the underlying equality evaluates.</a>

<a class="Keyword" id="1057">data</a> <a id="_IsRelatedTo_"></a><a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="1062">_IsRelatedTo_</a> <a class="Symbol" id="1076">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1077" id="1077">x</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1079" id="1079">y</a> <a class="Symbol" id="1081">:</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#374" id="1083">A</a><a class="Symbol" id="1084">)</a> <a class="Symbol" id="1086">:</a> <a class="Primitive" href="Agda.Primitive.html#388" id="1088">Set</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#370" id="1092">ℓ</a> <a class="Keyword" id="1094">where</a>
  <a id="_IsRelatedTo_.relTo"></a><a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1102" id="1102">relTo</a> <a class="Symbol" id="1108">:</a> <a class="Symbol" id="1110">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1111" id="1111">x∼y</a> <a class="Symbol" id="1115">:</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1077" id="1117">x</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#386" id="1119">∼</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1079" id="1121">y</a><a class="Symbol" id="1122">)</a> <a class="Symbol" id="1124">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1077" id="1126">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="1128">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1079" id="1140">y</a>

<a class="Comment" id="1143">------------------------------------------------------------------------</a>
<a class="Comment" id="1216">-- Reasoning combinators</a>

<a class="Comment" id="1242">-- Note that the arguments to the `step`s are not provided in their</a>
<a class="Comment" id="1310">-- "natural" order and syntax declarations are later used to re-order</a>
<a class="Comment" id="1380">-- them. This is because the `step` ordering allows the type-checker to</a>
<a class="Comment" id="1452">-- better infer the middle argument `y` from the `_IsRelatedTo_`</a>
<a class="Comment" id="1517">-- argument (see issue 622).</a>
<a class="Comment" id="1546">--</a>
<a class="Comment" id="1549">-- This has two practical benefits. First it speeds up type-checking by</a>
<a class="Comment" id="1621">-- approximately a factor of 5. Secondly it allows the combinators to be</a>
<a class="Comment" id="1694">-- used with macros that use reflection, e.g. `Tactic.RingSolver`, where</a>
<a class="Comment" id="1767">-- they need to be able to extract `y` using reflection.</a>

<a class="Keyword" id="1825">infix</a>  <a class="Number" id="1832">1</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#1925" id="1834">begin_</a>
<a class="Keyword" id="1841">infixr</a> <a class="Number" id="1848">2</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2027" id="1850">step-∼</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2191" id="1857">step-≡</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2340" id="1864">step-≡˘</a>
<a class="Keyword" id="1872">infixr</a> <a class="Number" id="1879">2</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2479" id="1881">_≡⟨⟩_</a>
<a class="Keyword" id="1887">infix</a>  <a class="Number" id="1894">3</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2564" id="1896">_∎</a>

<a class="Comment" id="1900">-- Beginning of a proof</a>

<a id="begin_"></a><a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#1925" id="1925">begin_</a> <a class="Symbol" id="1932">:</a> <a class="Symbol" id="1934">∀</a> <a class="Symbol" id="1936">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1937" id="1937">x</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1939" id="1939">y</a><a class="Symbol" id="1940">}</a> <a class="Symbol" id="1942">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1937" id="1944">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="1946">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1939" id="1958">y</a> <a class="Symbol" id="1960">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1937" id="1962">x</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#386" id="1964">∼</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1939" id="1966">y</a>
<a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#1925" id="1968">begin</a> <a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1102" id="1974">relTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1980" id="1980">x∼y</a> <a class="Symbol" id="1984">=</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#1980" id="1986">x∼y</a>

<a class="Comment" id="1991">-- Standard step with the relation</a>

<a id="step-∼"></a><a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2027" id="2027">step-∼</a> <a class="Symbol" id="2034">:</a> <a class="Symbol" id="2036">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2038" id="2038">x</a> <a class="Symbol" id="2040">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2041" id="2041">y</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2043" id="2043">z</a><a class="Symbol" id="2044">}</a> <a class="Symbol" id="2046">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2041" id="2048">y</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="2050">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2043" id="2062">z</a> <a class="Symbol" id="2064">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2038" id="2066">x</a> <a class="Bound Operator" href="Relation.Binary.Reasoning.Base.Single.html#386" id="2068">∼</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2041" id="2070">y</a> <a class="Symbol" id="2072">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2038" id="2074">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="2076">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2043" id="2088">z</a>
<a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2027" id="2090">step-∼</a> <a class="Symbol" id="2097">_</a> <a class="Symbol" id="2099">(</a><a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1102" id="2100">relTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2106" id="2106">y∼z</a><a class="Symbol" id="2109">)</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2111" id="2111">x∼y</a> <a class="Symbol" id="2115">=</a> <a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1102" id="2117">relTo</a> <a class="Symbol" id="2123">(</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#427" id="2124">trans</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2111" id="2130">x∼y</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2106" id="2134">y∼z</a><a class="Symbol" id="2137">)</a>

<a class="Comment" id="2140">-- Step with a non-trivial propositional equality</a>

<a id="step-≡"></a><a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2191" id="2191">step-≡</a> <a class="Symbol" id="2198">:</a> <a class="Symbol" id="2200">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2202" id="2202">x</a> <a class="Symbol" id="2204">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2205" id="2205">y</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2207" id="2207">z</a><a class="Symbol" id="2208">}</a> <a class="Symbol" id="2210">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2205" id="2212">y</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="2214">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2207" id="2226">z</a> <a class="Symbol" id="2228">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2202" id="2230">x</a> <a class="Datatype Operator" href="Agda.Builtin.Equality.html#150" id="2232">≡</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2205" id="2234">y</a> <a class="Symbol" id="2236">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2202" id="2238">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="2240">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2207" id="2252">z</a>
<a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2191" id="2254">step-≡</a> <a class="Symbol" id="2261">_</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2263" id="2263">x∼z</a> <a class="InductiveConstructor" href="Agda.Builtin.Equality.html#207" id="2267">P.refl</a> <a class="Symbol" id="2274">=</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2263" id="2276">x∼z</a>

<a class="Comment" id="2281">-- Step with a flipped non-trivial propositional equality</a>

<a id="step-≡˘"></a><a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2340" id="2340">step-≡˘</a> <a class="Symbol" id="2348">:</a> <a class="Symbol" id="2350">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2352" id="2352">x</a> <a class="Symbol" id="2354">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2355" id="2355">y</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2357" id="2357">z</a><a class="Symbol" id="2358">}</a> <a class="Symbol" id="2360">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2355" id="2362">y</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="2364">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2357" id="2376">z</a> <a class="Symbol" id="2378">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2355" id="2380">y</a> <a class="Datatype Operator" href="Agda.Builtin.Equality.html#150" id="2382">≡</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2352" id="2384">x</a> <a class="Symbol" id="2386">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2352" id="2388">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="2390">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2357" id="2402">z</a>
<a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2340" id="2404">step-≡˘</a> <a class="Symbol" id="2412">_</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2414" id="2414">x∼z</a> <a class="InductiveConstructor" href="Agda.Builtin.Equality.html#207" id="2418">P.refl</a> <a class="Symbol" id="2425">=</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2414" id="2427">x∼z</a>

<a class="Comment" id="2432">-- Step with a trivial propositional equality</a>

<a id="_≡⟨⟩_"></a><a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2479" id="2479">_≡⟨⟩_</a> <a class="Symbol" id="2485">:</a> <a class="Symbol" id="2487">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2489" id="2489">x</a> <a class="Symbol" id="2491">{</a><a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2492" id="2492">y</a><a class="Symbol" id="2493">}</a> <a class="Symbol" id="2495">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2489" id="2497">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="2499">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2492" id="2511">y</a> <a class="Symbol" id="2513">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2489" id="2515">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="2517">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2492" id="2529">y</a>
<a class="Symbol" id="2531">_</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2479" id="2533">≡⟨⟩</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2537" id="2537">x∼y</a> <a class="Symbol" id="2541">=</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2537" id="2543">x∼y</a>

<a class="Comment" id="2548">-- Termination</a>

<a id="_∎"></a><a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2564" id="2564">_∎</a> <a class="Symbol" id="2567">:</a> <a class="Symbol" id="2569">∀</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2571" id="2571">x</a> <a class="Symbol" id="2573">→</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2571" id="2575">x</a> <a class="Datatype Operator" href="Relation.Binary.Reasoning.Base.Single.html#1062" id="2577">IsRelatedTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2571" id="2589">x</a>
<a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#2591" id="2591">x</a> <a class="Function Operator" href="Relation.Binary.Reasoning.Base.Single.html#2564" id="2593">∎</a> <a class="Symbol" id="2595">=</a> <a class="InductiveConstructor" href="Relation.Binary.Reasoning.Base.Single.html#1102" id="2597">relTo</a> <a class="Bound" href="Relation.Binary.Reasoning.Base.Single.html#404" id="2603">refl</a>

<a class="Comment" id="2609">-- Syntax declarations</a>

<a class="Keyword" id="2633">syntax</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2027" id="2640">step-∼</a>  <a class="Bound" id="2648">x</a> <a class="Bound" id="2650">y∼z</a> <a class="Bound" id="2654">x∼y</a> <a class="Symbol" id="2658">=</a> <a class="Bound" id="2660">x</a> <a class="Function" id="2662">∼⟨</a>  <a class="Bound" id="2666">x∼y</a> <a class="Function" id="2670">⟩</a> <a class="Bound" id="2672">y∼z</a>
<a class="Keyword" id="2676">syntax</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2191" id="2683">step-≡</a>  <a class="Bound" id="2691">x</a> <a class="Bound" id="2693">y≡z</a> <a class="Bound" id="2697">x≡y</a> <a class="Symbol" id="2701">=</a> <a class="Bound" id="2703">x</a> <a class="Function" id="2705">≡⟨</a>  <a class="Bound" id="2709">x≡y</a> <a class="Function" id="2713">⟩</a> <a class="Bound" id="2715">y≡z</a>
<a class="Keyword" id="2719">syntax</a> <a class="Function" href="Relation.Binary.Reasoning.Base.Single.html#2340" id="2726">step-≡˘</a> <a class="Bound" id="2734">x</a> <a class="Bound" id="2736">y≡z</a> <a class="Bound" id="2740">y≡x</a> <a class="Symbol" id="2744">=</a> <a class="Bound" id="2746">x</a> <a class="Function" id="2748">≡˘⟨</a> <a class="Bound" id="2752">y≡x</a> <a class="Function" id="2756">⟩</a> <a class="Bound" id="2758">y≡z</a>
</pre></div></body></html>